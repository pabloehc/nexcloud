{"version":3,"file":"index.cjs","sources":["../lib/index.ts"],"sourcesContent":["/**\n * @param app app ID, e.g. \"mail\"\n * @param key name of the property\n * @param fallback optional parameter to use as default value\n * @throws if the key can't be found\n */\nexport function loadState<T>(app: string, key: string, fallback?: T): T {\n    const elem = <HTMLInputElement>document.querySelector(`#initial-state-${app}-${key}`)\n    if (elem === null) {\n        if (fallback !== undefined) {\n            return fallback\n        }\n        throw new Error(`Could not find initial state ${key} of ${app}`)\n    }\n\n    try {\n        return JSON.parse(atob(elem.value))\n    } catch (e) {\n       throw new Error(`Could not parse initial state ${key} of ${app}`)\n    }\n}\n"],"names":[],"mappings":";;AAAA;;;;;AAKG;SACa,SAAS,CAAI,GAAW,EAAE,GAAW,EAAE,QAAY,EAAA;AAC/D,IAAA,IAAM,IAAI,GAAqB,QAAQ,CAAC,aAAa,CAAC,iBAAkB,CAAA,MAAA,CAAA,GAAG,EAAI,GAAA,CAAA,CAAA,MAAA,CAAA,GAAG,CAAE,CAAC,CAAA;IACrF,IAAI,IAAI,KAAK,IAAI,EAAE;QACf,IAAI,QAAQ,KAAK,SAAS,EAAE;AACxB,YAAA,OAAO,QAAQ,CAAA;AAClB,SAAA;QACD,MAAM,IAAI,KAAK,CAAC,+BAAA,CAAA,MAAA,CAAgC,GAAG,EAAO,MAAA,CAAA,CAAA,MAAA,CAAA,GAAG,CAAE,CAAC,CAAA;AACnE,KAAA;IAED,IAAI;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAA;AACtC,KAAA;AAAC,IAAA,OAAO,CAAC,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,gCAAA,CAAA,MAAA,CAAiC,GAAG,EAAO,MAAA,CAAA,CAAA,MAAA,CAAA,GAAG,CAAE,CAAC,CAAA;AACnE,KAAA;AACL;;;;"}