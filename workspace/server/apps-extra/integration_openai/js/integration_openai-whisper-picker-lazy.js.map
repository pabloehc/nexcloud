{"version":3,"file":"integration_openai-whisper-picker-lazy.js?v=83b348d7acdec5c007eb","mappings":"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","sources":["webpack:///integration_openai/src/views/WhisperCustomPickerElement.vue?vue&type=style&index=0&id=6bd52c00&prod&scoped=true&lang=scss&","webpack://integration_openai/./src/views/WhisperCustomPickerElement.vue?f471","webpack:///integration_openai/src/views/WhisperCustomPickerElement.vue","webpack:///integration_openai/src/views/WhisperCustomPickerElement.vue?vue&type=script&lang=js&","webpack://integration_openai/./src/views/WhisperCustomPickerElement.vue?28ee","webpack://integration_openai/./src/views/WhisperCustomPickerElement.vue?5558"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".openai-picker-content[data-v-6bd52c00]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px 16px 16px}.openai-picker-content h2[data-v-6bd52c00]{display:flex;align-items:center}.openai-picker-content .spacer[data-v-6bd52c00]{flex-grow:1}.openai-picker-content .attribution[data-v-6bd52c00]{padding-bottom:12px}.openai-picker-content .form-wrapper[data-v-6bd52c00]{display:flex;flex-direction:column;align-items:center;width:100%;margin:8px 0}.openai-picker-content .form-wrapper .radios[data-v-6bd52c00]{display:flex}.openai-picker-content .line[data-v-6bd52c00]{display:flex;align-items:center;margin-top:8px;width:100%}.openai-picker-content .line.justified[data-v-6bd52c00]{justify-content:center}.openai-picker-content .footer[data-v-6bd52c00]{display:flex;align-items:center;justify-content:end;width:100%}.openai-picker-content .footer .error[data-v-6bd52c00]{margin-right:12px}.openai-picker-content[data-v-6bd52c00] .recorder{background-color:var(--color-main-background) !important;box-shadow:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-content *{color:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important;border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-recorder__time-limit{position:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player-bar{border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-line-control{background-color:var(--color-background-dark) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-line-control__head{background-color:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player__time{font-size:14px}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-volume__icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records{height:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record{border-bottom:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record--selected{background-color:var(--color-background-dark) !important;border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record--selected .ar-icon{background-color:var(--color-background-dark) !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/WhisperCustomPickerElement.vue\"],\"names\":[],\"mappings\":\"AACA,wCACC,UAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,2BAAA,CAEA,2CACC,YAAA,CACA,kBAAA,CAGD,gDACC,WAAA,CAGD,qDACC,mBAAA,CAGD,sDACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CACA,8DACC,YAAA,CAIF,8CACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,UAAA,CACA,wDACC,sBAAA,CAIF,gDACC,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,UAAA,CAEA,uDACC,iBAAA,CAIF,kDACC,wDAAA,CACA,2BAAA,CACA,gEACC,uCAAA,CAED,2DACC,wDAAA,CACA,sCAAA,CACA,+CAAA,CAED,2EACC,yBAAA,CAGA,iEACC,+CAAA,CAED,8EACC,wDAAA,CACA,oFACC,kDAAA,CAGF,mEACC,cAAA,CAGA,8EACC,wDAAA,CACA,sCAAA,CAIH,8DACC,uBAAA,CACA,sEACC,sDAAA,CAED,gFACC,wDAAA,CACA,+CAAA,CACA,yFACC,wDAAA\",\"sourcesContent\":[\"\\n.openai-picker-content {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tpadding: 12px 16px 16px 16px;\\n\\n\\th2 {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t}\\n\\n\\t.spacer {\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\n\\t.attribution {\\n\\t\\tpadding-bottom: 12px;\\n\\t}\\n\\n\\t.form-wrapper {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\talign-items: center;\\n\\t\\twidth: 100%;\\n\\t\\tmargin: 8px 0;\\n\\t\\t.radios {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t}\\n\\t}\\n\\n\\t.line {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tmargin-top: 8px;\\n\\t\\twidth: 100%;\\n\\t\\t&.justified {\\n\\t\\t\\tjustify-content: center;\\n\\t\\t}\\n\\t}\\n\\n\\t.footer {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: end;\\n\\t\\twidth: 100%;\\n\\n\\t\\t.error {\\n\\t\\t\\tmargin-right: 12px;\\n\\t\\t}\\n\\t}\\n\\n\\t:deep(.recorder) {\\n\\t\\tbackground-color: var(--color-main-background) !important;\\n\\t\\tbox-shadow: unset !important;\\n\\t\\t.ar-content * {\\n\\t\\t\\tcolor: var(--color-main-text) !important;\\n\\t\\t}\\n\\t\\t.ar-icon {\\n\\t\\t\\tbackground-color: var(--color-main-background) !important;\\n\\t\\t\\tfill: var(--color-main-text) !important;\\n\\t\\t\\tborder: 1px solid var(--color-border) !important;\\n\\t\\t}\\n\\t\\t.ar-recorder__time-limit {\\n\\t\\t\\tposition: unset !important;\\n\\t\\t}\\n\\t\\t.ar-player {\\n\\t\\t\\t&-bar {\\n\\t\\t\\t\\tborder: 1px solid var(--color-border) !important;\\n\\t\\t\\t}\\n\\t\\t\\t.ar-line-control {\\n\\t\\t\\t\\tbackground-color: var(--color-background-dark) !important;\\n\\t\\t\\t\\t&__head {\\n\\t\\t\\t\\t\\tbackground-color: var(--color-main-text) !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t&__time {\\n\\t\\t\\t\\tfont-size: 14px;\\n\\t\\t\\t}\\n\\t\\t\\t.ar-volume {\\n\\t\\t\\t\\t&__icon {\\n\\t\\t\\t\\t\\tbackground-color: var(--color-main-background) !important;\\n\\t\\t\\t\\t\\tfill: var(--color-main-text) !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t.ar-records {\\n\\t\\t\\theight: unset !important;\\n\\t\\t\\t&__record {\\n\\t\\t\\t\\tborder-bottom: 1px solid var(--color-border) !important;\\n\\t\\t\\t}\\n\\t\\t\\t&__record--selected {\\n\\t\\t\\t\\tbackground-color: var(--color-background-dark) !important;\\n\\t\\t\\t\\tborder: 1px solid var(--color-border) !important;\\n\\t\\t\\t\\t.ar-icon {\\n\\t\\t\\t\\t\\tbackground-color: var(--color-background-dark) !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"openai-picker-content\"},[_c('h2',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('integration_openai', 'AI speech-to-text'))+\"\\n\\t\")]),_vm._v(\" \"),_c('a',{staticClass:\"attribution\",attrs:{\"target\":\"_blank\",\"href\":\"https://openai.com\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.poweredByTitle)+\"\\n\\t\")]),_vm._v(\" \"),_c('audio-recorder',{staticClass:\"recorder\",attrs:{\"attempts\":1,\"time\":120,\"show-download-button\":true,\"show-upload-button\":false,\"after-recording\":_vm.onRecordEnd}}),_vm._v(\" \"),_c('div',{staticClass:\"form-wrapper\"},[_c('div',{staticClass:\"line justified\"},[_c('div',{staticClass:\"radios\"},[_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.mode,\"type\":\"radio\",\"value\":\"transcribe\",\"button-variant-grouped\":\"horizontal\",\"name\":\"mode\"},on:{\"update:checked\":function($event){_vm.mode=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Transcribe'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.mode,\"type\":\"radio\",\"value\":\"translate\",\"button-variant-grouped\":\"horizontal\",\"name\":\"mode\"},on:{\"update:checked\":function($event){_vm.mode=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Translate (only to English)'))+\"\\n\\t\\t\\t\\t\")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[(_vm.error)?_c('span',{staticClass:\"error\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.error)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"primary\",\"aria-label\":_vm.submitButtonLabel,\"disabled\":_vm.loading || _vm.audio === null},on:{\"click\":_vm.onInputEnter},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('NcLoadingIcon',{attrs:{\"size\":20}}):_c('ArrowRightIcon')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.submitButtonLabel)+\"\\n\\t\\t\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"openai-picker-content\">\n\t\t<h2>\n\t\t\t{{ t('integration_openai', 'AI speech-to-text') }}\n\t\t</h2>\n\t\t<a class=\"attribution\"\n\t\t\ttarget=\"_blank\"\n\t\t\thref=\"https://openai.com\">\n\t\t\t{{ poweredByTitle }}\n\t\t</a>\n\t\t<audio-recorder\n\t\t\tclass=\"recorder\"\n\t\t\t:attempts=\"1\"\n\t\t\t:time=\"120\"\n\t\t\t:show-download-button=\"true\"\n\t\t\t:show-upload-button=\"false\"\n\t\t\t:after-recording=\"onRecordEnd\" />\n\t\t<div class=\"form-wrapper\">\n\t\t\t<div class=\"line justified\">\n\t\t\t\t<div class=\"radios\">\n\t\t\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"mode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tvalue=\"transcribe\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\tname=\"mode\">\n\t\t\t\t\t\t{{ t('integration_openai', 'Transcribe') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"mode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tvalue=\"translate\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\tname=\"mode\">\n\t\t\t\t\t\t{{ t('integration_openai', 'Translate (only to English)') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"footer\">\n\t\t\t<span v-if=\"error\" class=\"error\">\n\t\t\t\t{{ error }}\n\t\t\t</span>\n\t\t\t<NcButton\n\t\t\t\ttype=\"primary\"\n\t\t\t\t:aria-label=\"submitButtonLabel\"\n\t\t\t\t:disabled=\"loading || audio === null\"\n\t\t\t\t@click=\"onInputEnter\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcLoadingIcon v-if=\"loading\"\n\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t<ArrowRightIcon v-else />\n\t\t\t\t</template>\n\t\t\t\t{{ submitButtonLabel }}\n\t\t\t</NcButton>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ArrowRightIcon from 'vue-material-design-icons/ArrowRight.vue'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport VueAudioRecorder from 'vue2-audio-recorder'\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\nimport Vue from 'vue'\nVue.use(VueAudioRecorder)\n\nexport default {\n\tname: 'WhisperCustomPickerElement',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcCheckboxRadioSwitch,\n\t\tArrowRightIcon,\n\t},\n\n\tprops: {\n\t\tproviderId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taccessible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tpoweredByTitle: t('integration_openai', 'by OpenAI with Whisper'),\n\t\t\tmode: 'transcribe',\n\t\t\taudio: null,\n\t\t\terror: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsubmitButtonLabel() {\n\t\t\treturn this.mode === 'transcribe'\n\t\t\t\t? t('integration_openai', 'Transcribe')\n\t\t\t\t: t('integration_openai', 'Translate')\n\t\t},\n\t},\n\n\twatch: {\n\t},\n\n\tmounted() {\n\t},\n\n\tmethods: {\n\t\tasync onRecordEnd(e) {\n\t\t\tconst readBlob = (blob) => {\n\t\t\t\tconst reader = new FileReader()\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\treader.addEventListener('load', () => {\n\t\t\t\t\t\tresolve(reader.result)\n\t\t\t\t\t})\n\t\t\t\t\treader.readAsDataURL(blob)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tthis.audio = await readBlob(e.blob)\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('recording error', e.message)\n\t\t\t}\n\t\t},\n\t\tonSubmit(url) {\n\t\t\tthis.$emit('submit', url)\n\t\t},\n\t\tonInputEnter() {\n\t\t\tthis.loading = true\n\t\t\tthis.error = null\n\t\t\tconst params = {\n\t\t\t\ttranslate: this.mode === 'translate',\n\t\t\t\taudioBase64: this.audio,\n\t\t\t}\n\t\t\tconst url = generateUrl('/apps/integration_openai/audio/transcriptions')\n\t\t\treturn axios.post(url, params)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconsole.debug('whisper response', response.data)\n\t\t\t\t\tthis.onSubmit(response.data.text)\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.debug('openai whisper request error', error)\n\t\t\t\t\tshowError(\n\t\t\t\t\t\tt('integration_openai', 'Failed to get transcription/translation')\n\t\t\t\t\t\t+ ': ' + (\n\t\t\t\t\t\t\terror.response?.data?.body?.error?.message\n\t\t\t\t\t\t\t|| error.response?.data?.body?.error?.code\n\t\t\t\t\t\t\t|| error.response?.data?.error\n\t\t\t\t\t\t\t|| t('integration_openai', 'Unknown OpenAI API error')\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.openai-picker-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 12px 16px 16px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\n\t.attribution {\n\t\tpadding-bottom: 12px;\n\t}\n\n\t.form-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tmargin: 8px 0;\n\t\t.radios {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\n\t.line {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-top: 8px;\n\t\twidth: 100%;\n\t\t&.justified {\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n\n\t.footer {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\twidth: 100%;\n\n\t\t.error {\n\t\t\tmargin-right: 12px;\n\t\t}\n\t}\n\n\t:deep(.recorder) {\n\t\tbackground-color: var(--color-main-background) !important;\n\t\tbox-shadow: unset !important;\n\t\t.ar-content * {\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t\t.ar-icon {\n\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\tfill: var(--color-main-text) !important;\n\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t}\n\t\t.ar-recorder__time-limit {\n\t\t\tposition: unset !important;\n\t\t}\n\t\t.ar-player {\n\t\t\t&-bar {\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t.ar-line-control {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t&__head {\n\t\t\t\t\tbackground-color: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&__time {\n\t\t\t\tfont-size: 14px;\n\t\t\t}\n\t\t\t.ar-volume {\n\t\t\t\t&__icon {\n\t\t\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\t\t\tfill: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.ar-records {\n\t\t\theight: unset !important;\n\t\t\t&__record {\n\t\t\t\tborder-bottom: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t&__record--selected {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t\t.ar-icon {\n\t\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WhisperCustomPickerElement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WhisperCustomPickerElement.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WhisperCustomPickerElement.vue?vue&type=style&index=0&id=6bd52c00&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WhisperCustomPickerElement.vue?vue&type=style&index=0&id=6bd52c00&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./WhisperCustomPickerElement.vue?vue&type=template&id=6bd52c00&scoped=true&\"\nimport script from \"./WhisperCustomPickerElement.vue?vue&type=script&lang=js&\"\nexport * from \"./WhisperCustomPickerElement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WhisperCustomPickerElement.vue?vue&type=style&index=0&id=6bd52c00&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bd52c00\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","Vue","VueAudioRecorder","name","components","NcButton","NcLoadingIcon","NcCheckboxRadioSwitch","ArrowRightIcon","props","providerId","type","String","required","accessible","Boolean","default","data","loading","poweredByTitle","t","mode","audio","error","computed","submitButtonLabel","watch","mounted","methods","e","blob","reader","FileReader","Promise","resolve","addEventListener","result","readAsDataURL","readBlob","console","message","onSubmit","url","$emit","onInputEnter","params","translate","audioBase64","generateUrl","axios","then","response","debug","text","catch","showError","body","code","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","this","_c","_self","staticClass","_v","_s","attrs","onRecordEnd","on","$event","_e","scopedSlots","_u","key","fn","proxy"],"sourceRoot":""}