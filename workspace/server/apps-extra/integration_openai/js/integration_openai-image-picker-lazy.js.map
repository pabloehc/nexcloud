{"version":3,"file":"integration_openai-image-picker-lazy.js?v=9f0a2260bf52017767cd","mappings":"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","sources":["webpack:///integration_openai/src/views/ImageCustomPickerElement.vue?vue&type=style&index=0&id=bce0741c&prod&scoped=true&lang=scss&","webpack://integration_openai/./src/views/ImageCustomPickerElement.vue?dd66","webpack:///integration_openai/src/views/ImageCustomPickerElement.vue","webpack:///integration_openai/src/views/ImageCustomPickerElement.vue?vue&type=script&lang=js&","webpack://integration_openai/./src/views/ImageCustomPickerElement.vue?fc19","webpack://integration_openai/./src/views/ImageCustomPickerElement.vue?09c5"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".dalle-picker-content[data-v-bce0741c]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px 16px 16px}.dalle-picker-content h2[data-v-bce0741c]{display:flex;align-items:center}.dalle-picker-content .prompts[data-v-bce0741c]{margin-top:8px;display:flex;flex-wrap:wrap;align-items:center}.dalle-picker-content .prompts>*[data-v-bce0741c]{margin-right:8px}.dalle-picker-content .prompt-bubble[data-v-bce0741c]{max-width:250px}.dalle-picker-content .spacer[data-v-bce0741c]{flex-grow:1}.dalle-picker-content .attribution[data-v-bce0741c]{color:var(--color-text-maxcontrast);padding-bottom:8px}.dalle-picker-content .input-wrapper[data-v-bce0741c]{display:flex;align-items:center;width:100%}.dalle-picker-content .prompt-select[data-v-bce0741c]{width:100%;margin-top:4px}.dalle-picker-content .footer[data-v-bce0741c]{width:100%;display:flex;align-items:center;justify-content:end;margin-top:12px}.dalle-picker-content .footer>*[data-v-bce0741c]{margin-left:4px}.dalle-picker-content .advanced[data-v-bce0741c]{width:100%;padding:12px 0}.dalle-picker-content .advanced .line[data-v-bce0741c]{display:flex;align-items:center;margin-top:8px}.dalle-picker-content .advanced .line input[data-v-bce0741c],.dalle-picker-content .advanced .line select[data-v-bce0741c]{width:200px}.dalle-picker-content .advanced input[type=number][data-v-bce0741c]{width:80px;appearance:initial !important;-moz-appearance:initial !important;-webkit-appearance:initial !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/ImageCustomPickerElement.vue\"],\"names\":[],\"mappings\":\"AACA,uCACC,UAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,2BAAA,CAEA,0CACC,YAAA,CACA,kBAAA,CAGD,gDACC,cAAA,CACA,YAAA,CACA,cAAA,CACA,kBAAA,CACA,kDACC,gBAAA,CAIF,sDACC,eAAA,CAGD,+CACC,WAAA,CAGD,oDACC,mCAAA,CACA,kBAAA,CAGD,sDACC,YAAA,CACA,kBAAA,CACA,UAAA,CAGD,sDACC,UAAA,CACA,cAAA,CAGD,+CACC,UAAA,CACA,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CACA,iDACC,eAAA,CAIF,iDACC,UAAA,CACA,cAAA,CACA,uDACC,YAAA,CACA,kBAAA,CACA,cAAA,CAEA,2HAEC,WAAA,CAIF,oEACC,UAAA,CACA,6BAAA,CACA,kCAAA,CACA,qCAAA\",\"sourcesContent\":[\"\\n.dalle-picker-content {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tpadding: 12px 16px 16px 16px;\\n\\n\\th2 {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t}\\n\\n\\t.prompts {\\n\\t\\tmargin-top: 8px;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\talign-items: center;\\n\\t\\t> * {\\n\\t\\t\\tmargin-right: 8px;\\n\\t\\t}\\n\\t}\\n\\n\\t.prompt-bubble {\\n\\t\\tmax-width: 250px;\\n\\t}\\n\\n\\t.spacer {\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\n\\t.attribution {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\tpadding-bottom: 8px;\\n\\t}\\n\\n\\t.input-wrapper {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t.prompt-select {\\n\\t\\twidth: 100%;\\n\\t\\tmargin-top: 4px;\\n\\t}\\n\\n\\t.footer {\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: end;\\n\\t\\tmargin-top: 12px;\\n\\t\\t> * {\\n\\t\\t\\tmargin-left: 4px;\\n\\t\\t}\\n\\t}\\n\\n\\t.advanced {\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 12px 0;\\n\\t\\t.line {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\talign-items: center;\\n\\t\\t\\tmargin-top: 8px;\\n\\n\\t\\t\\tinput,\\n\\t\\t\\tselect {\\n\\t\\t\\t\\twidth: 200px;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tinput[type=number] {\\n\\t\\t\\twidth: 80px;\\n\\t\\t\\tappearance: initial !important;\\n\\t\\t\\t-moz-appearance: initial !important;\\n\\t\\t\\t-webkit-appearance: initial !important;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dalle-picker-content\"},[_c('h2',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('integration_openai', 'AI image generation'))+\"\\n\\t\")]),_vm._v(\" \"),_c('a',{staticClass:\"attribution\",attrs:{\"target\":\"_blank\",\"href\":\"https://openai.com/dall-e-2/\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.poweredByTitle)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"input-wrapper\"},[_c('NcTextField',{ref:\"dalle-search-input\",attrs:{\"value\":_vm.query,\"label\":_vm.inputPlaceholder,\"disabled\":_vm.loading,\"show-trailing-button\":!!_vm.query},on:{\"update:value\":function($event){_vm.query=$event},\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.generate.apply(null, arguments)},\"trailing-button-click\":function($event){_vm.query = ''}}})],1),_vm._v(\" \"),(_vm.reference === null || _vm.query === '')?_c('div',{staticClass:\"prompts\"},_vm._l((_vm.prompts),function(p){return _c('NcUserBubble',{key:p.id + p.value,staticClass:\"prompt-bubble\",attrs:{\"title\":p.value,\"size\":30,\"avatar-image\":\"icon-history\",\"display-name\":p.value},on:{\"click\":function($event){_vm.query = p.value}}})}),1):_vm._e(),_vm._v(\" \"),(_vm.reference !== null)?_c('ImageReferenceWidget',{attrs:{\"rich-object\":_vm.reference.richObject,\"orientation\":\"horizontal\"}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('NcButton',{staticClass:\"advanced-button\",attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('integration_openai', 'Show/hide advanced options')},on:{\"click\":function($event){_vm.showAdvanced = !_vm.showAdvanced}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c(_vm.showAdvancedIcon,{tag:\"component\"})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Advanced options'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.t('integration_openai', 'Preview images with OpenAI'),\"disabled\":_vm.loading || !_vm.query},on:{\"click\":_vm.generate},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('NcLoadingIcon'):(_vm.resultUrl !== null)?_c('RefreshIcon'):_c('EyeIcon')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.previewButtonLabel)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.resultUrl !== null)?_c('NcButton',{attrs:{\"type\":\"primary\",\"aria-label\":_vm.t('integration_openai', 'Submit the current preview'),\"disabled\":_vm.loading},on:{\"click\":_vm.submit},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ArrowRightIcon')]},proxy:true}],null,false,1168934321)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Send'))+\"\\n\\t\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAdvanced),expression:\"showAdvanced\"}],staticClass:\"advanced\"},[_c('div',{staticClass:\"line\"},[_c('label',{attrs:{\"for\":\"number\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Number of images to generate (1-10)'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.imageNumber),expression:\"imageNumber\"}],attrs:{\"id\":\"number\",\"type\":\"number\",\"min\":\"1\",\"max\":\"10\",\"step\":\"1\"},domProps:{\"value\":(_vm.imageNumber)},on:{\"input\":function($event){if($event.target.composing)return;_vm.imageNumber=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"line\"},[_c('label',{attrs:{\"for\":\"size\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('integration_openai', 'Size of the generated images'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"}),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.imageSize),expression:\"imageSize\"}],attrs:{\"id\":\"size\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.imageSize=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"256x256\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t256x256 px\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"512x512\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t512x512 px\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"1024x1024\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t1024x1024 px\\n\\t\\t\\t\\t\")])])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"dalle-picker-content\">\n\t\t<h2>\n\t\t\t{{ t('integration_openai', 'AI image generation') }}\n\t\t</h2>\n\t\t<a class=\"attribution\"\n\t\t\ttarget=\"_blank\"\n\t\t\thref=\"https://openai.com/dall-e-2/\">\n\t\t\t{{ poweredByTitle }}\n\t\t</a>\n\t\t<div class=\"input-wrapper\">\n\t\t\t<NcTextField\n\t\t\t\tref=\"dalle-search-input\"\n\t\t\t\t:value.sync=\"query\"\n\t\t\t\t:label=\"inputPlaceholder\"\n\t\t\t\t:disabled=\"loading\"\n\t\t\t\t:show-trailing-button=\"!!query\"\n\t\t\t\t@keydown.enter=\"generate\"\n\t\t\t\t@trailing-button-click=\"query = ''\" />\n\t\t</div>\n\t\t<div v-if=\"reference === null || query === ''\"\n\t\t\tclass=\"prompts\">\n\t\t\t<NcUserBubble v-for=\"p in prompts\"\n\t\t\t\t:key=\"p.id + p.value\"\n\t\t\t\tclass=\"prompt-bubble\"\n\t\t\t\t:title=\"p.value\"\n\t\t\t\t:size=\"30\"\n\t\t\t\tavatar-image=\"icon-history\"\n\t\t\t\t:display-name=\"p.value\"\n\t\t\t\t@click=\"query = p.value\" />\n\t\t</div>\n\t\t<ImageReferenceWidget v-if=\"reference !== null\"\n\t\t\t:rich-object=\"reference.richObject\"\n\t\t\torientation=\"horizontal\" />\n\t\t<div class=\"footer\">\n\t\t\t<NcButton class=\"advanced-button\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('integration_openai', 'Show/hide advanced options')\"\n\t\t\t\t@click=\"showAdvanced = !showAdvanced\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<component :is=\"showAdvancedIcon\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('integration_openai', 'Advanced options') }}\n\t\t\t</NcButton>\n\t\t\t<NcButton\n\t\t\t\ttype=\"secondary\"\n\t\t\t\t:aria-label=\"t('integration_openai', 'Preview images with OpenAI')\"\n\t\t\t\t:disabled=\"loading || !query\"\n\t\t\t\t@click=\"generate\">\n\t\t\t\t{{ previewButtonLabel }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" />\n\t\t\t\t\t<RefreshIcon v-else-if=\"resultUrl !== null\" />\n\t\t\t\t\t<EyeIcon v-else />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton v-if=\"resultUrl !== null\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\t:aria-label=\"t('integration_openai', 'Submit the current preview')\"\n\t\t\t\t:disabled=\"loading\"\n\t\t\t\t@click=\"submit\">\n\t\t\t\t{{ t('integration_openai', 'Send') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<ArrowRightIcon />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t\t<div v-show=\"showAdvanced\" class=\"advanced\">\n\t\t\t<div class=\"line\">\n\t\t\t\t<label for=\"number\">\n\t\t\t\t\t{{ t('integration_openai', 'Number of images to generate (1-10)') }}\n\t\t\t\t</label>\n\t\t\t\t<div class=\"spacer\" />\n\t\t\t\t<input\n\t\t\t\t\tid=\"number\"\n\t\t\t\t\tv-model=\"imageNumber\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tmin=\"1\"\n\t\t\t\t\tmax=\"10\"\n\t\t\t\t\tstep=\"1\">\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<label for=\"size\">\n\t\t\t\t\t{{ t('integration_openai', 'Size of the generated images') }}\n\t\t\t\t</label>\n\t\t\t\t<div class=\"spacer\" />\n\t\t\t\t<select\n\t\t\t\t\tid=\"size\"\n\t\t\t\t\tv-model=\"imageSize\">\n\t\t\t\t\t<option value=\"256x256\">\n\t\t\t\t\t\t256x256 px\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"512x512\">\n\t\t\t\t\t\t512x512 px\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"1024x1024\">\n\t\t\t\t\t\t1024x1024 px\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EyeIcon from 'vue-material-design-icons/Eye.vue'\nimport RefreshIcon from 'vue-material-design-icons/Refresh.vue'\nimport ArrowRightIcon from 'vue-material-design-icons/ArrowRight.vue'\nimport ChevronRightIcon from 'vue-material-design-icons/ChevronRight.vue'\nimport ChevronDownIcon from 'vue-material-design-icons/ChevronDown.vue'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\nimport NcSelect from '@nextcloud/vue/dist/Components/NcSelect.js'\nimport NcUserBubble from '@nextcloud/vue/dist/Components/NcUserBubble.js'\n\nimport ImageReferenceWidget from './ImageReferenceWidget.vue'\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl, generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'ImageCustomPickerElement',\n\n\tcomponents: {\n\t\tImageReferenceWidget,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcTextField,\n\t\tNcSelect,\n\t\tChevronRightIcon,\n\t\tChevronDownIcon,\n\t\tArrowRightIcon,\n\t\tNcUserBubble,\n\t\tEyeIcon,\n\t\tRefreshIcon,\n\t},\n\n\tprops: {\n\t\tproviderId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taccessible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tquery: '',\n\t\t\tloading: false,\n\t\t\tresultUrl: null,\n\t\t\treference: null,\n\t\t\tinputPlaceholder: t('integration_openai', 'cyberpunk pizza with pineapple, cats fighting with lightsabers'),\n\t\t\tpoweredByTitle: t('integration_openai', 'by OpenAI with DALL·E 2'),\n\t\t\tshowAdvanced: false,\n\t\t\timageNumber: 1,\n\t\t\timageSize: '1024x1024',\n\t\t\tprompts: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowAdvancedIcon() {\n\t\t\treturn this.showAdvanced\n\t\t\t\t? ChevronDownIcon\n\t\t\t\t: ChevronRightIcon\n\t\t},\n\t\tpreviewButtonLabel() {\n\t\t\treturn this.resultUrl !== null\n\t\t\t\t? t('integration_openai', 'Regenerate')\n\t\t\t\t: t('integration_openai', 'Preview')\n\t\t},\n\t},\n\n\twatch: {\n\t},\n\n\tmounted() {\n\t\tthis.focusOnInput()\n\t\tthis.getPromptHistory()\n\t\tthis.getLastImageSize()\n\t},\n\n\tmethods: {\n\t\tfocusOnInput() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$refs['dalle-search-input'].$el.getElementsByTagName('input')[0]?.focus()\n\t\t\t}, 300)\n\t\t},\n\t\tgetPromptHistory() {\n\t\t\tconst params = {\n\t\t\t\tparams: {\n\t\t\t\t\ttype: 0,\n\t\t\t\t},\n\t\t\t}\n\t\t\tconst url = generateUrl('/apps/integration_openai/prompts')\n\t\t\treturn axios.get(url, params)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.prompts = response.data\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t},\n\t\tgetLastImageSize() {\n\t\t\tconst url = generateUrl('/apps/integration_openai/last-image-size')\n\t\t\treturn axios.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.imageSize = response.data\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t},\n\t\tsubmit() {\n\t\t\tthis.$emit('submit', this.resultUrl)\n\t\t},\n\t\tinsertPrompt(prompt) {\n\t\t\tif (this.prompts.find(p => p.value === prompt) === undefined) {\n\t\t\t\tconsole.debug('INSERT', prompt)\n\t\t\t\tthis.prompts.unshift({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tvalue: prompt,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tgenerate() {\n\t\t\tif (this.query === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loading = true\n\t\t\tconst params = {\n\t\t\t\tprompt: this.query,\n\t\t\t\tn: parseInt(this.imageNumber),\n\t\t\t\tsize: this.imageSize,\n\t\t\t}\n\t\t\tconst url = generateUrl('/apps/integration_openai/images/generations')\n\t\t\treturn axios.post(url, params)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst hash = response.data?.hash\n\t\t\t\t\tif (hash && hash.length && hash.length > 0) {\n\t\t\t\t\t\tthis.resultUrl = window.location.protocol + '//' + window.location.host\n\t\t\t\t\t\t\t+ generateUrl('/apps/integration_openai/i/{hash}', { hash })\n\t\t\t\t\t\tthis.resolveResult()\n\t\t\t\t\t\tthis.insertPrompt(this.query)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.error = response.data?.error ?? t('integration_openai', 'Unknown error')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error('OpenAI image request error', error)\n\t\t\t\t\tshowError(\n\t\t\t\t\t\tt('integration_openai', 'OpenAI error') + ': '\n\t\t\t\t\t\t\t+ (error.response?.data?.body?.error?.message\n\t\t\t\t\t\t\t\t|| error.response?.data?.body?.error?.code\n\t\t\t\t\t\t\t\t|| error.response?.data?.error\n\t\t\t\t\t\t\t\t|| t('integration_openai', 'Unknown OpenAI API error')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t},\n\t\tresolveResult() {\n\t\t\tthis.loading = true\n\t\t\tthis.abortController = new AbortController()\n\t\t\taxios.get(generateOcsUrl('references/resolve', 2) + '?reference=' + encodeURIComponent(this.resultUrl), {\n\t\t\t\tsignal: this.abortController.signal,\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.reference = response.data.ocs.data.references[this.resultUrl]\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.dalle-picker-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 12px 16px 16px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.prompts {\n\t\tmargin-top: 8px;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\t> * {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t}\n\n\t.prompt-bubble {\n\t\tmax-width: 250px;\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\n\t.attribution {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-bottom: 8px;\n\t}\n\n\t.input-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t}\n\n\t.prompt-select {\n\t\twidth: 100%;\n\t\tmargin-top: 4px;\n\t}\n\n\t.footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\tmargin-top: 12px;\n\t\t> * {\n\t\t\tmargin-left: 4px;\n\t\t}\n\t}\n\n\t.advanced {\n\t\twidth: 100%;\n\t\tpadding: 12px 0;\n\t\t.line {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-top: 8px;\n\n\t\t\tinput,\n\t\t\tselect {\n\t\t\t\twidth: 200px;\n\t\t\t}\n\t\t}\n\n\t\tinput[type=number] {\n\t\t\twidth: 80px;\n\t\t\tappearance: initial !important;\n\t\t\t-moz-appearance: initial !important;\n\t\t\t-webkit-appearance: initial !important;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCustomPickerElement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCustomPickerElement.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCustomPickerElement.vue?vue&type=style&index=0&id=bce0741c&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCustomPickerElement.vue?vue&type=style&index=0&id=bce0741c&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ImageCustomPickerElement.vue?vue&type=template&id=bce0741c&scoped=true&\"\nimport script from \"./ImageCustomPickerElement.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageCustomPickerElement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageCustomPickerElement.vue?vue&type=style&index=0&id=bce0741c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bce0741c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","name","components","ImageReferenceWidget","NcButton","NcLoadingIcon","NcTextField","NcSelect","ChevronRightIcon","ChevronDownIcon","ArrowRightIcon","NcUserBubble","EyeIcon","RefreshIcon","props","providerId","type","String","required","accessible","Boolean","default","data","query","loading","resultUrl","reference","inputPlaceholder","t","poweredByTitle","showAdvanced","imageNumber","imageSize","prompts","computed","showAdvancedIcon","previewButtonLabel","watch","mounted","focusOnInput","getPromptHistory","getLastImageSize","methods","setTimeout","$refs","$el","getElementsByTagName","focus","url","generateUrl","axios","params","then","response","catch","error","console","submit","$emit","insertPrompt","prompt","undefined","find","p","value","debug","unshift","generate","n","parseInt","size","hash","length","window","location","protocol","host","resolveResult","showError","body","message","code","abortController","AbortController","generateOcsUrl","encodeURIComponent","signal","ocs","references","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","this","_c","_self","staticClass","_v","_s","attrs","ref","on","$event","indexOf","_k","keyCode","key","apply","arguments","_l","_e","richObject","scopedSlots","_u","fn","tag","proxy","directives","rawName","expression","domProps","target","composing","$$selectedVal","Array","prototype","filter","call","o","selected","map","_value","multiple"],"sourceRoot":""}