"use strict";(self.webpackChunkintegration_openai=self.webpackChunkintegration_openai||[]).push([["gpt-picker-lazy"],{8926:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(7537),a=n.n(i),o=n(3645),r=n.n(o)()(a());r.push([t.id,".chatgpt-picker-content[data-v-7e14724a]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px 16px 16px}.chatgpt-picker-content h2[data-v-7e14724a]{display:flex;align-items:center}.chatgpt-picker-content .prompts[data-v-7e14724a]{margin-top:8px;display:flex;flex-wrap:wrap;align-items:center}.chatgpt-picker-content .prompts>*[data-v-7e14724a]{margin-right:8px}.chatgpt-picker-content .prompt-bubble[data-v-7e14724a]{max-width:250px}.chatgpt-picker-content .preview[data-v-7e14724a]{width:100%}.chatgpt-picker-content .preview h3[data-v-7e14724a]{font-weight:bold}.chatgpt-picker-content .preview .editable-preview[data-v-7e14724a]{width:100% !important;max-height:300px !important}.chatgpt-picker-content .spacer[data-v-7e14724a]{flex-grow:1}.chatgpt-picker-content .attribution[data-v-7e14724a]{color:var(--color-text-maxcontrast);padding-bottom:8px}.chatgpt-picker-content .input-wrapper[data-v-7e14724a]{display:flex;align-items:center;width:100%}.chatgpt-picker-content .prompt-select[data-v-7e14724a]{width:100%;margin-top:4px}.chatgpt-picker-content .footer[data-v-7e14724a]{width:100%;display:flex;align-items:center;justify-content:end;margin-top:12px}.chatgpt-picker-content .footer>*[data-v-7e14724a]{margin-left:4px}.chatgpt-picker-content .advanced[data-v-7e14724a]{width:100%;padding:12px 0}.chatgpt-picker-content .advanced .line[data-v-7e14724a]{display:flex;align-items:center;margin-top:8px}.chatgpt-picker-content .advanced .line input[data-v-7e14724a]{width:200px}.chatgpt-picker-content .advanced .line .model-select[data-v-7e14724a]{width:300px}.chatgpt-picker-content .advanced input[type=number][data-v-7e14724a]{width:120px;appearance:initial !important;-moz-appearance:initial !important;-webkit-appearance:initial !important}.chatgpt-picker-content .advanced .include-query[data-v-7e14724a]{margin-right:16px}","",{version:3,sources:["webpack://./src/views/ChatGptCustomPickerElement.vue"],names:[],mappings:"AACA,yCACC,UAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,2BAAA,CAEA,4CACC,YAAA,CACA,kBAAA,CAGD,kDACC,cAAA,CACA,YAAA,CACA,cAAA,CACA,kBAAA,CACA,oDACC,gBAAA,CAIF,wDACC,eAAA,CAGD,kDACC,UAAA,CACA,qDACC,gBAAA,CAED,oEACC,qBAAA,CACA,2BAAA,CAIF,iDACC,WAAA,CAGD,sDACC,mCAAA,CACA,kBAAA,CAGD,wDACC,YAAA,CACA,kBAAA,CACA,UAAA,CAGD,wDACC,UAAA,CACA,cAAA,CAGD,iDACC,UAAA,CACA,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CACA,mDACC,eAAA,CAIF,mDACC,UAAA,CACA,cAAA,CACA,yDACC,YAAA,CACA,kBAAA,CACA,cAAA,CAEA,+DACC,WAAA,CAED,uEACC,WAAA,CAIF,sEACC,WAAA,CACA,6BAAA,CACA,kCAAA,CACA,qCAAA,CAGD,kEACC,iBAAA",sourcesContent:["\n.chatgpt-picker-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 12px 16px 16px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.prompts {\n\t\tmargin-top: 8px;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\t> * {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t}\n\n\t.prompt-bubble {\n\t\tmax-width: 250px;\n\t}\n\n\t.preview {\n\t\twidth: 100%;\n\t\th3 {\n\t\t\tfont-weight: bold;\n\t\t}\n\t\t.editable-preview {\n\t\t\twidth: 100% !important;\n\t\t\tmax-height: 300px !important;\n\t\t}\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\n\t.attribution {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-bottom: 8px;\n\t}\n\n\t.input-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t}\n\n\t.prompt-select {\n\t\twidth: 100%;\n\t\tmargin-top: 4px;\n\t}\n\n\t.footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\tmargin-top: 12px;\n\t\t> * {\n\t\t\tmargin-left: 4px;\n\t\t}\n\t}\n\n\t.advanced {\n\t\twidth: 100%;\n\t\tpadding: 12px 0;\n\t\t.line {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-top: 8px;\n\n\t\t\tinput {\n\t\t\t\twidth: 200px;\n\t\t\t}\n\t\t\t.model-select {\n\t\t\t\twidth: 300px;\n\t\t\t}\n\t\t}\n\n\t\tinput[type=number] {\n\t\t\twidth: 120px;\n\t\t\tappearance: initial !important;\n\t\t\t-moz-appearance: initial !important;\n\t\t\t-webkit-appearance: initial !important;\n\t\t}\n\n\t\t.include-query {\n\t\t\tmargin-right: 16px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},9073:(e,n,i)=>{i.d(n,{default:()=>j});var a=i(2640),o=i(6272),r=i(9429),s=i(1585),p=i(1622),l=i(3951),c=i(861),d=i.n(c),A=i(4192),u=i.n(A),m=i(204),h=i.n(m),g=i(6456),C=i.n(g),v=i(571),x=i.n(v),_=i(6122),f=i.n(_),y=i(2323),w=i.n(y),b=i(6937),k=i(9753),I=i(4024);const B={name:"ChatGptCustomPickerElement",components:{NcButton:d(),NcLoadingIcon:u(),NcTextField:h(),NcSelect:C(),NcCheckboxRadioSwitch:x(),ChevronRightIcon:s.default,ChevronDownIcon:p.default,HelpCircleIcon:l.Z,ArrowRightIcon:r.default,NcUserBubble:f(),RefreshIcon:o.Z,EyeIcon:a.Z,NcRichContenteditable:w()},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1}},data:()=>({query:"",result:null,loading:!1,models:[],inputPlaceholder:t("integration_openai","What is the matter with putting pineapple on pizza?"),poweredByTitle:t("integration_openai","by OpenAI"),modelPlaceholder:t("integration_openai","Choose a model"),showAdvanced:!1,selectedModel:null,includeQuery:!1,completionNumber:1,maxTokens:1e3,prompts:null}),computed:{showAdvancedIcon(){return this.showAdvanced?p.default:s.default},formattedModels(){return this.models?this.models.map((t=>({id:t.id,value:t.id,label:t.id+" ("+t.owned_by+")"}))):[]},previewButtonLabel(){return null!==this.result?t("integration_openai","Regenerate"):t("integration_openai","Preview")},emptyResult(){return""===this.result.trim()}},watch:{},mounted(){this.focusOnInput(),this.getModels(),this.getPromptHistory()},methods:{focusOnInput(){setTimeout((()=>{this.$refs["chatgpt-search-input"].$el.getElementsByTagName("input")[0]?.focus()}),300)},getPromptHistory(){const t=(0,k.generateUrl)("/apps/integration_openai/prompts");return b.Z.get(t,{params:{type:1}}).then((t=>{this.prompts=t.data})).catch((t=>{console.error(t)}))},getModels(){const t=(0,k.generateUrl)("/apps/integration_openai/models");return b.Z.get(t).then((t=>{this.models=t.data?.data;const e=t.data?.default_completion_model_id,n=this.models.find((t=>t.id===e))??this.models[0]??null;n&&(this.selectedModel={id:n.id,value:n.id,label:n.id+" ("+n.owned_by+")"})})).catch((t=>{console.error(t)}))},saveModel(e){const n={values:{default_completion_model_id:e}},i=(0,k.generateUrl)("/apps/integration_openai/config");return b.Z.put(i,n).then((t=>{})).catch((e=>{(0,I.x2)(t("integration_openai","Failed to save OpenAI default model ID")+": "+e.response?.request?.responseText)}))},submit(){this.$emit("submit",this.result.trim())},insertPrompt(t){void 0===this.prompts.find((e=>e.value===t))&&this.prompts.unshift({id:0,value:t})},generate(){if(""===this.query)return;this.loading=!0;const e={prompt:this.query,n:this.completionNumber,maxTokens:this.maxTokens};this.selectedModel&&(e.model=this.selectedModel.id,this.saveModel(this.selectedModel.id));const n=(0,k.generateUrl)("/apps/integration_openai/completions");return b.Z.post(n,e).then((t=>{const e=t.data;e.choices&&e.choices.length&&e.choices.length>0?(this.processCompletion(e.choices),this.insertPrompt(this.query)):this.error=t.data.error})).catch((e=>{console.error("OpenAI completions request error",e),(0,I.x2)(t("integration_openai","OpenAI error")+": "+(e.response?.data?.body?.error?.message||e.response?.data?.body?.error?.code||e.response?.data?.error||t("integration_openai","Unknown OpenAI API error")))})).then((()=>{this.loading=!1}))},processCompletion(e){const n=this.selectedModel.id.startsWith("gpt-")?e.filter((t=>!!t.message?.content)).map((t=>t.message?.content.replace(/^\s+|\s+$/g,""))):e.filter((t=>!!t.text)).map((t=>t.text.replace(/^\s+|\s+$/g,"")));if(n.length>0)if(1===n.length)this.result=this.includeQuery?t("integration_openai","Prompt")+"\n"+this.query+"\n\n"+t("integration_openai","Result")+"\n"+n[0]:n[0];else{const e=n.map(((e,n)=>t("integration_openai","Result {index}",{index:n+1})+"\n"+e));this.result=this.includeQuery?t("integration_openai","Prompt")+"\n"+this.query+"\n\n"+e.join("\n\n"):e.join("\n\n")}}}};var N=i(3379),D=i.n(N),q=i(7795),P=i.n(q),M=i(569),T=i.n(M),E=i(3565),R=i.n(E),S=i(9216),U=i.n(S),Z=i(4589),O=i.n(Z),G=i(8926),F={};F.styleTagTransform=O(),F.setAttributes=R(),F.insert=T().bind(null,"head"),F.domAPI=P(),F.insertStyleElement=U();D()(G.Z,F);G.Z&&G.Z.locals&&G.Z.locals;const j=(0,i(1900).Z)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chatgpt-picker-content"},[e("h2",[t._v("\n\t\t"+t._s(t.t("integration_openai","ChatGPT-like text generation"))+"\n\t")]),t._v(" "),e("a",{staticClass:"attribution",attrs:{target:"_blank",href:"https://openai.com"}},[t._v("\n\t\t"+t._s(t.poweredByTitle)+"\n\t")]),t._v(" "),e("div",{staticClass:"input-wrapper"},[e("NcTextField",{ref:"chatgpt-search-input",attrs:{value:t.query,label:t.inputPlaceholder,disabled:t.loading,"show-trailing-button":!!t.query},on:{"update:value":function(e){t.query=e},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.generate.apply(null,arguments)},"trailing-button-click":function(e){t.query=""}}})],1),t._v(" "),null===t.result||""===t.query?e("div",{staticClass:"prompts"},t._l(t.prompts,(function(n){return e("NcUserBubble",{key:n.id+n.value,staticClass:"prompt-bubble",attrs:{title:n.value,size:30,"avatar-image":"icon-history","display-name":n.value},on:{click:function(e){t.query=n.value}}})})),1):t._e(),t._v(" "),null!==t.result?e("div",{staticClass:"preview"},[e("h3",[t._v(t._s(t.t("integration_openai","Preview")))]),t._v(" "),e("NcRichContenteditable",{staticClass:"editable-preview",attrs:{value:t.result,multiline:!0,disabled:t.loading,placeholder:t.t("integration_openai","Preview content"),"link-autocomplete":!1},on:{"update:value":function(e){t.result=e}}})],1):t._e(),t._v(" "),e("div",{staticClass:"footer"},[e("NcButton",{staticClass:"advanced-button",attrs:{type:"tertiary","aria-label":t.t("integration_openai","Show/hide advanced options")},on:{click:function(e){t.showAdvanced=!t.showAdvanced}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.showAdvancedIcon,{tag:"component"})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("integration_openai","Advanced options"))+"\n\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"secondary","aria-label":t.t("integration_openai","Preview text generation by OpenAI"),disabled:t.loading||!t.query},on:{click:t.generate},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("NcLoadingIcon"):null!==t.result?e("RefreshIcon"):e("EyeIcon")]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.previewButtonLabel)+"\n\t\t\t")]),t._v(" "),null!==t.result?e("NcButton",{attrs:{type:"primary","aria-label":t.t("integration_openai","Submit text generated by OpenAI"),disabled:t.loading||t.emptyResult},on:{click:t.submit},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArrowRightIcon")]},proxy:!0}],null,!1,1168934321)},[t._v("\n\t\t\t"+t._s(t.t("integration_openai","Send"))+"\n\t\t\t")]):t._e()],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}],staticClass:"advanced"},[e("div",{staticClass:"line"},[e("NcCheckboxRadioSwitch",{staticClass:"include-query",attrs:{checked:t.includeQuery},on:{"update:checked":function(e){t.includeQuery=e}}},[t._v("\n\t\t\t\t"+t._s(t.t("integration_openai","Include the prompt in the result"))+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"spacer"})],1),t._v(" "),e("div",{staticClass:"line"},[e("label",{attrs:{for:"nb-results"}},[t._v("\n\t\t\t\t"+t._s(t.t("integration_openai","How many results to generate"))+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"spacer"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.completionNumber,expression:"completionNumber"}],attrs:{id:"nb-results",type:"number",min:"1",max:"10",step:"1"},domProps:{value:t.completionNumber},on:{input:function(e){e.target.composing||(t.completionNumber=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"line"},[e("label",{attrs:{for:"openai-completion-model-select"}},[t._v("\n\t\t\t\t"+t._s(t.t("integration_openai","Model to use"))+"\n\t\t\t")]),t._v(" "),e("a",{attrs:{title:t.t("integration_openai","More information about OpenAI models"),href:"https://beta.openai.com/docs/models",target:"_blank"}},[e("NcButton",{attrs:{type:"tertiary","aria-label":t.t("integration_openai","More information about OpenAI models")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("HelpCircleIcon")]},proxy:!0}])})],1),t._v(" "),e("div",{staticClass:"spacer"}),t._v(" "),e("NcSelect",{staticClass:"model-select",attrs:{options:t.formattedModels,"input-id":"openai-completion-model-select"},model:{value:t.selectedModel,callback:function(e){t.selectedModel=e},expression:"selectedModel"}})],1),t._v(" "),e("div",{staticClass:"line"},[e("label",{attrs:{for:"max-tokens"}},[t._v("\n\t\t\t\t"+t._s(t.t("integration_openai","Approximate maximum number of words to generate (tokens)"))+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"spacer"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.maxTokens,expression:"maxTokens"}],attrs:{id:"max-tokens",type:"number",min:"10",max:"100000",step:"1"},domProps:{value:t.maxTokens},on:{input:function(e){e.target.composing||(t.maxTokens=e.target.value)}}})])])])}),[],!1,null,"7e14724a",null).exports}}]);
//# sourceMappingURL=integration_openai-gpt-picker-lazy.js.map?v=8bdd5baf598b0445a66d