"use strict";(self.webpackChunkintegration_openai=self.webpackChunkintegration_openai||[]).push([["whisper-picker-lazy"],{2742:(t,n,r)=>{r.d(n,{Z:()=>c});var o=r(7537),e=r.n(o),a=r(3645),i=r.n(a)()(e());i.push([t.id,".openai-picker-content[data-v-6bd52c00]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px 16px 16px}.openai-picker-content h2[data-v-6bd52c00]{display:flex;align-items:center}.openai-picker-content .spacer[data-v-6bd52c00]{flex-grow:1}.openai-picker-content .attribution[data-v-6bd52c00]{padding-bottom:12px}.openai-picker-content .form-wrapper[data-v-6bd52c00]{display:flex;flex-direction:column;align-items:center;width:100%;margin:8px 0}.openai-picker-content .form-wrapper .radios[data-v-6bd52c00]{display:flex}.openai-picker-content .line[data-v-6bd52c00]{display:flex;align-items:center;margin-top:8px;width:100%}.openai-picker-content .line.justified[data-v-6bd52c00]{justify-content:center}.openai-picker-content .footer[data-v-6bd52c00]{display:flex;align-items:center;justify-content:end;width:100%}.openai-picker-content .footer .error[data-v-6bd52c00]{margin-right:12px}.openai-picker-content[data-v-6bd52c00] .recorder{background-color:var(--color-main-background) !important;box-shadow:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-content *{color:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important;border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-recorder__time-limit{position:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player-bar{border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-line-control{background-color:var(--color-background-dark) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-line-control__head{background-color:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player__time{font-size:14px}.openai-picker-content[data-v-6bd52c00] .recorder .ar-player .ar-volume__icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records{height:unset !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record{border-bottom:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record--selected{background-color:var(--color-background-dark) !important;border:1px solid var(--color-border) !important}.openai-picker-content[data-v-6bd52c00] .recorder .ar-records__record--selected .ar-icon{background-color:var(--color-background-dark) !important}","",{version:3,sources:["webpack://./src/views/WhisperCustomPickerElement.vue"],names:[],mappings:"AACA,wCACC,UAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,2BAAA,CAEA,2CACC,YAAA,CACA,kBAAA,CAGD,gDACC,WAAA,CAGD,qDACC,mBAAA,CAGD,sDACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CACA,8DACC,YAAA,CAIF,8CACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,UAAA,CACA,wDACC,sBAAA,CAIF,gDACC,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,UAAA,CAEA,uDACC,iBAAA,CAIF,kDACC,wDAAA,CACA,2BAAA,CACA,gEACC,uCAAA,CAED,2DACC,wDAAA,CACA,sCAAA,CACA,+CAAA,CAED,2EACC,yBAAA,CAGA,iEACC,+CAAA,CAED,8EACC,wDAAA,CACA,oFACC,kDAAA,CAGF,mEACC,cAAA,CAGA,8EACC,wDAAA,CACA,sCAAA,CAIH,8DACC,uBAAA,CACA,sEACC,sDAAA,CAED,gFACC,wDAAA,CACA,+CAAA,CACA,yFACC,wDAAA",sourcesContent:["\n.openai-picker-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 12px 16px 16px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\n\t.attribution {\n\t\tpadding-bottom: 12px;\n\t}\n\n\t.form-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tmargin: 8px 0;\n\t\t.radios {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\n\t.line {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-top: 8px;\n\t\twidth: 100%;\n\t\t&.justified {\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n\n\t.footer {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\twidth: 100%;\n\n\t\t.error {\n\t\t\tmargin-right: 12px;\n\t\t}\n\t}\n\n\t:deep(.recorder) {\n\t\tbackground-color: var(--color-main-background) !important;\n\t\tbox-shadow: unset !important;\n\t\t.ar-content * {\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t\t.ar-icon {\n\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\tfill: var(--color-main-text) !important;\n\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t}\n\t\t.ar-recorder__time-limit {\n\t\t\tposition: unset !important;\n\t\t}\n\t\t.ar-player {\n\t\t\t&-bar {\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t.ar-line-control {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t&__head {\n\t\t\t\t\tbackground-color: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&__time {\n\t\t\t\tfont-size: 14px;\n\t\t\t}\n\t\t\t.ar-volume {\n\t\t\t\t&__icon {\n\t\t\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\t\t\tfill: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.ar-records {\n\t\t\theight: unset !important;\n\t\t\t&__record {\n\t\t\t\tborder-bottom: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t&__record--selected {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t\t.ar-icon {\n\t\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const c=i},4608:(n,r,o)=>{o.d(r,{default:()=>j});var e=o(9429),a=o(861),i=o.n(a),c=o(4192),d=o.n(c),A=o(571),s=o.n(A),p=o(5013),l=o.n(p),C=o(6937),u=o(9753),m=o(4024);o(144).default.use(l());const b={name:"WhisperCustomPickerElement",components:{NcButton:i(),NcLoadingIcon:d(),NcCheckboxRadioSwitch:s(),ArrowRightIcon:e.default},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1}},data:()=>({loading:!1,poweredByTitle:t("integration_openai","by OpenAI with Whisper"),mode:"transcribe",audio:null,error:null}),computed:{submitButtonLabel(){return"transcribe"===this.mode?t("integration_openai","Transcribe"):t("integration_openai","Translate")}},watch:{},mounted(){},methods:{async onRecordEnd(t){try{this.audio=await(t=>{const n=new FileReader;return new Promise((r=>{n.addEventListener("load",(()=>{r(n.result)})),n.readAsDataURL(t)}))})(t.blob)}catch(t){console.error("recording error",t.message)}},onSubmit(t){this.$emit("submit",t)},onInputEnter(){this.loading=!0,this.error=null;const n={translate:"translate"===this.mode,audioBase64:this.audio},r=(0,u.generateUrl)("/apps/integration_openai/audio/transcriptions");return C.Z.post(r,n).then((t=>{console.debug("whisper response",t.data),this.onSubmit(t.data.text)})).catch((n=>{console.debug("openai whisper request error",n),(0,m.x2)(t("integration_openai","Failed to get transcription/translation")+": "+(n.response?.data?.body?.error?.message||n.response?.data?.body?.error?.code||n.response?.data?.error||t("integration_openai","Unknown OpenAI API error")))})).then((()=>{this.loading=!1}))}}};var g=o(3379),v=o.n(g),k=o(7795),h=o.n(k),x=o(569),_=o.n(x),f=o(3565),w=o.n(f),y=o(9216),D=o.n(y),B=o(4589),E=o.n(B),I=o(2742),R={};R.styleTagTransform=E(),R.setAttributes=w(),R.insert=_().bind(null,"head"),R.domAPI=h(),R.insertStyleElement=D();v()(I.Z,R);I.Z&&I.Z.locals&&I.Z.locals;const j=(0,o(1900).Z)(b,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"openai-picker-content"},[n("h2",[t._v("\n\t\t"+t._s(t.t("integration_openai","AI speech-to-text"))+"\n\t")]),t._v(" "),n("a",{staticClass:"attribution",attrs:{target:"_blank",href:"https://openai.com"}},[t._v("\n\t\t"+t._s(t.poweredByTitle)+"\n\t")]),t._v(" "),n("audio-recorder",{staticClass:"recorder",attrs:{attempts:1,time:120,"show-download-button":!0,"show-upload-button":!1,"after-recording":t.onRecordEnd}}),t._v(" "),n("div",{staticClass:"form-wrapper"},[n("div",{staticClass:"line justified"},[n("div",{staticClass:"radios"},[n("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.mode,type:"radio",value:"transcribe","button-variant-grouped":"horizontal",name:"mode"},on:{"update:checked":function(n){t.mode=n}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("integration_openai","Transcribe"))+"\n\t\t\t\t")]),t._v(" "),n("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.mode,type:"radio",value:"translate","button-variant-grouped":"horizontal",name:"mode"},on:{"update:checked":function(n){t.mode=n}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("integration_openai","Translate (only to English)"))+"\n\t\t\t\t")])],1)])]),t._v(" "),n("div",{staticClass:"footer"},[t.error?n("span",{staticClass:"error"},[t._v("\n\t\t\t"+t._s(t.error)+"\n\t\t")]):t._e(),t._v(" "),n("NcButton",{attrs:{type:"primary","aria-label":t.submitButtonLabel,disabled:t.loading||null===t.audio},on:{click:t.onInputEnter},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?n("NcLoadingIcon",{attrs:{size:20}}):n("ArrowRightIcon")]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.submitButtonLabel)+"\n\t\t")])],1)],1)}),[],!1,null,"6bd52c00",null).exports}}]);
//# sourceMappingURL=integration_openai-whisper-picker-lazy.js.map?v=83b348d7acdec5c007eb